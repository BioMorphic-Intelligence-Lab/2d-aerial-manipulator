function IDot = IDot(q, q_dot,l, m)
%IDOT Function that returns the time derivative of the system inertia.

tB = q(3);
t1 = q(4);
t2 = q(5);
t3 = q(6);
t4 = q(7);

tBd = q_dot(3);
t1d = q_dot(4);
t2d = q_dot(5);
t3d = q_dot(6);
t4d = q_dot(7);

IDot = 1/2*l*m*(2*(2*sin(tB+t1)+sin(tB+t1+t2))*(l*cos(tB+t1)*(tBd+t1d)...
    +1/2*l*cos(tB+t1+t2)*(tBd+t1d+t2d))+2*(2*cos(tB+t1)...
    +cos(tB+t1+t2))*(-l*sin(tB+t1)*(tBd+t1d)...
    -1/2*l*sin(tB+t1+t2)*(tBd+t1d+t2d))+2*(2*sin(tB+t1)+2*sin(tB+t1+t2)...
    +sin(tB+t1+t2+t3))*(l*cos(tB+t1)*(tBd+t1d)...
    +l*cos(tB+t1+t2)*(tBd+t1d+t2d)...
    +1/2*l*cos(tB+t1+t2+t3)*(tBd+t1d+t2d+t3d))+2*(2*cos(t1)...
    +2*cos(tB+t1+t2)+cos(tB+t1+t2+t3))*(-l*sin(t1)*t1d...
    -l*sin(tB+t1+t2)*(tBd+t1d+t2d)-1/2*l*sin(tB+t1+t2+t3)*(tBd+t1d+t2d+t3d))...
    +2*(2*sin(tB+t1)+2*sin(tB+t1+t2)+2*sin(tB+t1+t2+t3)...
    +sin(tB+t1+t2+t3+t4))*(l*cos(tB+t1)*(tBd+t1d)...
    +l*cos(tB+t1+t2)*(tBd+t1d+t2d)+l*cos(tB+t1+t2+t3)*(tBd+t1d+t2d+t3d)...
    +1/2*l*cos(tB+t1+t2+t3+t4)*(tBd+t1d+t2d+t3d+t4d))...
    +l*(2*cos(t1)+2*cos(tB+t1+t2)+2*cos(tB+t1+t2+t3)...
    +cos(tB+t1+t2+t3+t4))*(-2*sin(t1)*t1d-2*sin(tB+t1+t2)*(tBd+t1d+t2d)...
    -2*sin(tB+t1+t2+t3)*(tBd+t1d+t2d+t3d)...
    -sin(tB+t1+t2+t3+t4)*(tBd+t1d+t2d+t3d+t4d)));
end

